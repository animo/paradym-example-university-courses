name: Issue Course Certificate

# Workflow can be triggered through the API
trigger:
  type: api

input:
  type: 'object'
  properties:
    studentNumber:
      type: string
      description: The student number
    name:
      type: string
      description: The name of the student
    course:
      type: string
      description: The course name
  required:
    - studentNumber
    - name
    - course

actions:
  # Setup the connection by showing the QR code in your client
  - id: createConnection
    name: didcomm/createConnection@v1

  # Issue the course credential
  - id: issueCredential
    name: didcomm/issueCredential@v1
    attributes:
      connectionId: $.actions.createConnection.output.connection.connectionId
      anoncreds:
        # Make sure the credential template is created with the same attributes (name, course, studentNumber) as used below.
        credentialDefinitionId: <YOUR_CREDENTIAL_DEFINITION_ID>
        attributes:
          studentNumber: $.input.studentNumber
          name: $.input.name
          course: $.input.course
